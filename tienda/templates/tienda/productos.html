<!DOCTYPE html>
<html lang="es">
    {% load static %}
<head>
    <meta charset="UTF-8">
    <title>Lista de productos disponibles</title>

    <style>
        body      { font-family: Arial, sans-serif; background-color: #e7f1f8; margin: 0; padding: 0; }
        h1        { text-align: center; }
        table     { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td    { border: 1px solid #ccc; padding: 10px; text-align: left; }
        th        { background-color: #0077cc; color: #fff; }
        img       { display: block; max-width: 100px; height: auto; }
        .volver   { text-align: center; margin: 20px; }
        a.button  { padding: 8px 16px; background:#0077cc; color:#fff; border-radius:6px; text-decoration:none; }
        a.button:hover { background:#005fa3; }
    </style>
</head>

<body>
<header>
    <h1>Productos disponibles</h1>
</header>

<main>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Imagen</th>   {# ← la imagen va aquí para que coincida con el orden de las celdas #}
                <th>Nombre</th>
                <th>Descripción</th>
                <th>Precio</th>
                <th>Stock</th>
                <th>Categoría</th>
            </tr>
        </thead>

        <tbody>
            {% for p in productos %}
            <tr>
                <td>{{ p.producto_id }}</td>

                <td>
                    {% if p.imagen %}
                        {# Si en BD solo guardas "productos/archivo.png" #}
                        <img src="{% static p.imagen %}" alt="Imagen de {{ p.nombre }}">
                    {% else %}
                        <em>Sin imagen</em>
                    {% endif %}
                </td>

                <td>{{ p.nombre }}</td>
                <td>{{ p.descripción }}</td>
                <td>${{ p.precio }}</td>
                <td>{{ p.cantidad_en_stock }}</td>
                <td>{{ p.categoria.nombre }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="7" style="text-align:center;">No hay productos registrados.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    {# --- BOTÓN PARA VOLVER AL PERFIL --- #}
    <div class="volver">
        {# Ajusta el nombre de la URL a la que Sí exista en tu urls.py -- por ejemplo 'usuario_perfil' #}
        <a href="{% url 'perfil' %}" class="button">Volver a mi perfil</a>
    </div>

    {% if productos %}
        <p style="text-align:center;">Total de productos: {{ productos|length }}</p>
    {% endif %}
</main>
</body>
</html>
